<!DOCTYPE html>
<html lang="en">
<head>

<base href=".">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>依存関係</title>

<link rel="stylesheet" href="assets/css/custom_bootstrap.css" type="text/css">
<link rel="stylesheet" href="assets/css/bootstrap-toc.min.css" type="text/css">
<link rel="stylesheet" href="assets/css/frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">


<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/scrollspy.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/bootstrap-toc.min.js"></script>
<script src="assets/js/jquery.touchSwipe.min.js"></script>
<script src="assets/js/anchor.min.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>

<script src="assets/js/lines_around_headings.js"></script>


<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body class="no-script
" data-spy="scroll" data-target="#toc" data-offset="70">

<script>
$('body').removeClass('no-script');
</script>

<nav class="navbar navbar-fixed-top navbar-default" id="topnav">
	<div class="container-fluid">
		<div class="navbar-right">
			<a id="toc-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<form class="navbar-form pull-right" id="navbar-search-form">
                               <div class="form-group has-feedback">
                                       <input type="text" class="form-control input-sm" name="search" id="sidenav-lookup-field" placeholder="search" disabled>
				       <span class="glyphicon glyphicon-search form-control-feedback" id="search-mgn-glass"></span>
                               </div>
                        </form>
		</div>
		<div class="navbar-header">
			<a id="sidenav-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<a id="home-link" href="index.html" class="hotdoc-navbar-brand">
				<img src="assets/images/meson_logo.png" alt="Home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
				
<li class="dropdown">
	<a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		モジュール <span class="caret"></span>
	</a>
	<ul class="dropdown-menu" id="modules-menu">
					<li>
				<a href="Gnome-module.html">GNOME</a>
			</li>
					<li>
				<a href="i18n-module.html">i18n</a>
			</li>
					<li>
				<a href="Pkgconfig-module.html">Pkgconfig</a>
			</li>
					<li>
				<a href="Python-3-module.html">Python 3</a>
			</li>
					<li>
				<a href="Qt4-module.html">Qt4</a>
			</li>
					<li>
				<a href="Qt5-module.html">Qt5</a>
			</li>
					<li>
				<a href="RPM-module.html">RPM</a>
			</li>
					<li>
				<a href="Windows-module.html">Windows</a>
			</li>
			</ul>
</li>
<li class="dropdown">
	<a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		クィックリファレンス <span class="caret"></span>
	</a>
	<ul class="dropdown-menu" id="quick-refs-menu">
					<li>
				<a href="Reference-manual.html">関数</a>
			</li>
					<li>
				<a href="Build-options.html">オプション</a>
			</li>
					<li>
				<a href="Configuration.html">設定</a>
			</li>
					<li>
				<a href="Dependencies.html">依存関係</a>
			</li>
					<li>
				<a href="Unit-tests.html">テスト</a>
			</li>
					<li>
				<a href="Syntax.html">文法</a>
			</li>
			</ul>
</li>
			</ul>
			<div class="hidden-xs hidden-sm navbar-text navbar-center">
				<p><b>Meson ビルドシステム</b></p>
			</div>
		</div>
	</div>
</nav>

<main>
<div data-extension="core" data-hotdoc-in-toplevel="True" data-hotdoc-project="Meson-documentation-1.0" data-hotdoc-ref="Dependencies.html" class="page_container" id="page-wrapper">
<script src="assets/js/utils.js"></script>

<div class="panel panel-collapse oc-collapsed" id="sidenav" data-hotdoc-role="navigation">
	<script src="assets/js/navigation.js"></script>
	<script src="assets/js/sitemap.js"></script>
</div>

<div id="body">
	<div id="main">
				    <div id="page-description" data-hotdoc-source="Dependencies.md" data-hotdoc-role="main">
        <h1 id="">依存関係</h1>
<p>Very few applications are fully self-contained, but rather they use external
libraries and frameworks to do their work. Meson makes it very easy to find
and use external dependencies. Here is how one would use the zlib
compression library.</p>
<pre><code class="language-meson">zdep = dependency('zlib', version : '&gt;=1.2.8')
exe = executable('zlibprog', 'prog.c', dependencies : zdep)
</code></pre>
<p>First Meson is told to find the external library <code>zlib</code> and error out if it
is not found. The <code>version</code> keyword is optional and specifies a version
requirement for the dependency. Then an executable is built using the
specified dependency. Note how the user does not need to manually handle
compiler or linker flags or deal with any other minutiae.</p>
<p>If you have multiple dependencies, pass them as an array:</p>
<pre><code class="language-meson">executable('manydeps', 'file.c', dependencies : [dep1, dep2, dep3, dep4])
</code></pre>
<p>If the dependency is optional, you can tell Meson not to error out if the
dependency is not found and then do further configuration.</p>
<pre><code class="language-meson">opt_dep = dependency('somedep', required : false)
if opt_dep.found()
  # Do something.
else
  # Do something else.
endif
</code></pre>
<p>You can pass the <code>opt_dep</code> variable to target construction functions whether
the actual dependency was found or not. Meson will ignore non-found
dependencies.</p>
<p>Meson also allows to get variables that are defined in the <code>pkg-config</code>
file. This can be done by using the <code>get_pkgconfig_variable</code> function.</p>
<p><code>meson zdep_prefix = zdep.get_pkgconfig_variable('prefix')</code></p>
<p>These variables can also be redefined by passing the <code>define_variable</code>
parameter, which might be useful in certain situations:</p>
<pre><code class="language-meson">define_variable: ['prefix', '/tmp'])  ```

The dependency detector works with all libraries that provide a `pkg-config`
file. Unfortunately several packages don't provide pkg-config files. Meson
has autodetection support for some of these, and they are described [later
in this page](#dependencies-with-custom-lookup-functionality).

# Declaring your own

You can declare your own dependency objects that can be used interchangeably
with dependency objects obtained from the system. The syntax is
straightforward:

```meson
my_inc = include_directories(...)
my_lib = static_library(...)
my_dep = declare_dependency(link_with : my_lib,
  include_directories : my_inc)
</code></pre>
<p>This declares a dependency that adds the given include directories and
static library to any target you use it in.</p>
<h1 id="building-dependencies-as-subprojects">Building dependencies as subprojects</h1>
<p>Many platforms do not provide a system package manager. On these systems
dependencies must be compiled from source. Meson's subprojects make it
simple to use system dependencies when they are available and to build
dependencies manually when they are not.</p>
<p>To make this work, the dependency must have Meson build definitions and it
must declare its own dependency like this:</p>
<pre><code class="language-meson">    foo_dep = declare_dependency(...)
</code></pre>
<p>Then any project that wants to use it can write out the following
declaration in their main <code>meson.build</code> file.</p>
<pre><code class="language-meson">    foo_dep = dependency('foo', fallback : ['foo', 'foo_dep'])
</code></pre>
<p>What this declaration means is that first Meson tries to look up the
dependency from the system (such as by using pkg-config). If it is not
available, then it builds subproject named <code>foo</code> and from that extracts a
variable <code>foo_dep</code>. That means that the return value of this function is
either an external or an internal dependency object. Since they can be used
interchangeably, the rest of the build definitions do not need to care which
one it is. Meson will take care of all the work behind the scenes to make
this work.</p>
<h1 id="dependency-method">Dependency method</h1>
<p>You can use the keyword <code>method</code> to let meson know what method to use when
searching for the dependency. The default value is <code>auto</code>.  Aditional
dependencies methods are <code>pkg-config</code>, <code>config-tool</code>, <code>system</code>, <code>sysconfig</code>,
<code>qmake</code>, <code>extraframework</code> and <code>dub</code>.</p>
<p><code>meson cups_dep = dependency('cups', method : 'pkg-config')</code></p>
<h3 id="some-notes-on-dub">Some notes on Dub</h3>
<p>Please understand that meson is only able to find dependencies that exist in
the local Dub repository. You need to manually fetch and build the target
dependencies.</p>
<p>For <code>urld</code>.  <code>dub fetch urld dub build urld</code></p>
<p>Other thing you need to keep in mind is that both meson and Dub need to be
using the same compiler. This can be achieved using Dub's <code>-compiler</code>
argument and/or manually setting the <code>DC</code> environment variable when running
meson.  <code>dub build urld --compiler=dmd DC="dmd" meson builddir</code></p>
<h1 id="dependencies-with-custom-lookup-functionality">Dependencies with custom lookup functionality</h1>
<p>Some dependencies have specific detection logic.</p>
<p>Generic dependency names are case-sensitive<sup><a href="Dependencies.html#footnote1">1</a></sup>, but
these dependency names are matched case-insensitively.  The recommended
style is to write them in all lower-case.</p>
<p>In some cases, more than one detection method exists, and the <code>method</code>
keyword may be used to select a detection method to use.  The <code>auto</code> method
uses any checking mechanisms in whatever order meson thinks is best.</p>
<p>e.g. libwmf and CUPS provide both pkg-config and config-tool support. You
can force one or another via the <code>method</code> keyword:</p>
<pre><code class="language-meson">dependency('libwmf', method : 'config-tool')  ```

## Dependencies using config tools

[CUPS](#cups), [LLVM](#llvm), [pcap](#pcap), [WxWidgets](#wxwidgets),
[libwmf](#libwmf), and GnuStep either do not provide pkg-config modules or
additionally can be detected via a config tool (cups-config, llvm-config,
etc). Meson has native support for these tools, and they can be found like
other dependencies:

```meson
pcap_dep = dependency('pcap', version : '&gt;=1.0')
cups_dep = dependency('cups', version : '&gt;=1.4')
llvm_dep = dependency('llvm', version : '&gt;=4.0')
</code></pre>
<h2 id="appleframeworks">AppleFrameworks</h2>
<p>Use the <code>modules</code> keyword to list frameworks required, e.g.</p>
<p><code>meson dep = dependency('appleframeworks', modules : 'foundation')</code></p>
<p>These dependencies can never be found for non-OSX hosts.</p>
<h2 id="boost">Boost</h2>
<p>Boost is not a single dependency but rather a group of different
libraries. To use Boost headers-only libraries, simply add Boost as a
dependency.</p>
<pre><code class="language-meson">boost_dep = dependency('boost')
exe = executable('myprog', 'file.cc', dependencies : boost_dep)
</code></pre>
<p>To link against boost with Meson, simply list which libraries you would like
to use.</p>
<pre><code class="language-meson">boost_dep = dependency('boost', modules : ['thread', 'utility'])
exe = executable('myprog', 'file.cc', dependencies : boost_dep)
</code></pre>
<p>You can call <code>dependency</code> multiple times with different modules and use
those to link against your targets.</p>
<p>If your boost headers or libraries are in non-standard locations you can set
the BOOST_ROOT, BOOST_INCLUDEDIR, and/or BOOST_LIBRARYDIR environment
variables.</p>
<p>You can set the argument <code>threading</code> to <code>single</code> to use boost libraries that
have been compiled for single-threaded use instead.</p>
<h2 id="cups">CUPS</h2>
<p><code>method</code> may be <code>auto</code>, <code>config-tool</code>, <code>pkg-config</code> or <code>extraframework</code>.</p>
<h2 id="gl">GL</h2>
<p>This finds the OpenGL library in a way appropriate to the platform.</p>
<p><code>method</code> may be <code>auto</code>, <code>pkg-config</code> or <code>system</code>.</p>
<h2 id="gtest-and-gmock">GTest and GMock</h2>
<p>GTest and GMock come as sources that must be compiled as part of your
project. With Meson you don't have to care about the details, just pass
<code>gtest</code> or <code>gmock</code> to <code>dependency</code> and it will do everything for you. If you
want to use GMock, it is recommended to use GTest as well, as getting it to
work standalone is tricky.</p>
<p>You can set the <code>main</code> keyword argument to <code>true</code> to use the <code>main()</code>
function provided by GTest: <code>gtest_dep = dependency('gtest', main : true, required : false) e = executable('testprog', 'test.cc', dependencies : gtest_dep) test('gtest test', e)</code></p>
<h2 id="libwmf">libwmf</h2>
<p><em>(added 0.44.0)</em></p>
<p><code>method</code> may be <code>auto</code>, <code>config-tool</code> or <code>pkg-config</code>.</p>
<h2 id="llvm">LLVM</h2>
<p>Meson has native support for LLVM going back to version LLVM version 3.5.
It supports a few additional features compared to other config-tool based
dependencies.</p>
<p>As of 0.44.0 Meson supports the <code>static</code> keyword argument for LLVM. Before
this LLVM &gt;= 3.9 would always dynamically link, while older versions would
statically link, due to a quirk in <code>llvm-config</code>.</p>
<h3 id="modules-aka-components">Modules, a.k.a. Components</h3>
<p>Meson wraps LLVM's concept of components in it's own modules concept.  When
you need specific components you add them as modules as meson will do the
right thing:</p>
<pre><code class="language-meson">llvm_dep = dependency('llvm', version : '&gt;= 4.0', modules : ['amdgpu'])
</code></pre>
<p>As of 0.44.0 it can also take optional modules (these will affect the
arguments generated for a static link):</p>
<pre><code class="language-meson">llvm_dep = dependency(
  'llvm', version : '&gt;= 4.0', modules : ['amdgpu'], optional_modules : ['inteljitevents'],
)
</code></pre>
<h2 id="mpi">MPI</h2>
<p><em>(added 0.42.0)</em></p>
<p>MPI is supported for C, C++ and Fortran. Because dependencies are
language-specific, you must specify the requested language using the
<code>language</code> keyword argument, i.e.,</p>
<ul>
<li>
<code>dependency('mpi', language: 'c')</code> for the C MPI headers and libraries</li>
<li>
<code>dependency('mpi', language: 'cpp')</code> for the C++ MPI headers and libraries</li>
<li>
<code>dependency('mpi', language: 'fortran')</code> for the Fortran MPI headers and libraries</li>
</ul>
<p>Meson prefers pkg-config for MPI, but if your MPI implementation does not
provide them, it will search for the standard wrapper executables, <code>mpic</code>,
<code>mpicxx</code>, <code>mpic++</code>, <code>mpifort</code>, <code>mpif90</code>, <code>mpif77</code>. If these are not in your
path, they can be specified by setting the standard environment variables
<code>MPICC</code>, <code>MPICXX</code>, <code>MPIFC</code>, <code>MPIF90</code>, or <code>MPIF77</code>, during configuration.</p>
<h2 id="openmp">OpenMP</h2>
<p><em>(added 0.46.0)</em></p>
<p>This dependency selects the appropriate compiler flags and/or libraries to
use for OpenMP support.</p>
<p>The <code>language</code> keyword may used.</p>
<h2 id="pcap">pcap</h2>
<p><em>(added 0.42.0)</em></p>
<p><code>method</code> may be <code>auto</code>, <code>config-tool</code> or <code>pkg-config</code>.</p>
<h2 id="python3">Python3</h2>
<p>Python3 is handled specially by meson:</p>
<ol>
<li>Meson tries to use <code>pkg-config</code>.</li>
<li>If <code>pkg-config</code> fails meson uses a fallback:
<ul>
<li>On Windows the fallback is the current <code>python3</code> interpreter.</li>
<li>On OSX the fallback is a framework dependency from <code>/Library/Frameworks</code>.</li>
</ul>
</li>
</ol>
<p>Note that <code>python3</code> found by this dependency might differ from the one used
in <code>python3</code> module because modules uses the current interpreter, but
dependency tries <code>pkg-config</code> first.</p>
<p><code>method</code> may be <code>auto</code>, <code>extraframework</code>, <code>pkg-config</code> or <code>sysconfig</code></p>
<h2 id="qt4-qt5">Qt4 &amp; Qt5</h2>
<p>Meson has native Qt support. Its usage is best demonstrated with an example.</p>
<pre><code class="language-meson">qt5_mod = import('qt5')  qt5widgets = dependency('qt5', modules : 'Widgets')

processed = qt5_mod.preprocess(
  moc_headers : 'mainWindow.h',   # Only headers that need moc should be put here
  moc_sources : 'helperFile.cpp', # must have #include"moc_helperFile.cpp"
  ui_files    : 'mainWindow.ui',
  qresources  : 'resources.qrc',
)

q5exe = executable('qt5test',
  sources     : ['main.cpp',
                 'mainWindow.cpp',
                 processed],
  dependencies: qt5widgets)
</code></pre>
<p>Here we have an UI file created with Qt Designer and one source and header
file each that require preprocessing with the <code>moc</code> tool. We also define a
resource file to be compiled with <code>rcc</code>. We just have to tell Meson which
files are which and it will take care of invoking all the necessary tools in
the correct order, which is done with the <code>preprocess</code> method of the <code>qt5</code>
module. Its output is simply put in the list of sources for the target. The
<code>modules</code> keyword of <code>dependency</code> works just like it does with Boost. It
tells which subparts of Qt the program uses.</p>
<p>Setting the optional <code>private_headers</code> keyword to true adds the private
header include path of the given module(s) to the compiler flags.  (since
v0.47.0)</p>
<p><strong>Note</strong> using private headers in your project is a bad idea, do so at your own
risk.</p>
<p><code>method</code> may be <code>auto</code>, <code>pkgconfig</code> or <code>qmake</code>.</p>
<h2 id="sdl2">SDL2</h2>
<p>SDL2 can be located using <code>pkg-confg</code>, the <code>sdl2-config</code> config tool, or as
an OSX framework.</p>
<p><code>method</code> may be <code>auto</code>, <code>config-tool</code>, <code>extraframework</code> or <code>pkg-config</code>.</p>
<h2 id="threads">Threads</h2>
<p>This dependency selects the appropriate compiler flags and/or libraries to
use for thread support.</p>
<p>See <a href="Threads.html">threads</a>.</p>
<h2 id="valgrind">Valgrind</h2>
<p>Meson will find valgrind using <code>pkg-config</code>, but only uses the compilation
flags and avoids trying to link with it's non-PIC static libs.</p>
<h2 id="vulkan">Vulkan</h2>
<p><em>(added 0.42.0)</em></p>
<p>Vulkan can be located using <code>pkg-config</code>, or the <code>VULKAN_SDK</code> environment
variable.</p>
<p><code>method</code> may be <code>auto</code>, <code>pkg-config</code> or <code>system</code>.</p>
<h2 id="wxwidgets">WxWidgets</h2>
<p>Similar to <a href="Dependencies.html#boost">Boost</a>, WxWidgets is not a single library but rather a
collection of modules. WxWidgets is supported via <code>wx-config</code>.  Meson
substitutes <code>modules</code> to <code>wx-config</code> invocation, it generates -
<code>compile_args</code> using <code>wx-config --cxxflags $modules...</code> - <code>link_args</code> using
<code>wx-config --libs $modules...</code></p>
<h3 id="example">Example</h3>
<pre><code class="language-meson">wx_dep = dependency(
  'wxwidgets', version : '&gt;=3.0.0', modules : ['std', 'stc'],
)
</code></pre>
<pre><code class="language-shell">
# link_args: $ wx-config --libs std stc ```

&lt;hr&gt;
&lt;a name="footnote1"&gt;1&lt;/a&gt;: They may appear to be case-insensitive, if the
    underlying file system happens to be case-insensitive.
</code></pre>

    </div>
        




		
	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
	<hr>
	<div id="footer">
		    

	</div>
</div>

<div id="toc-column">
	
		<div class="edit-button">
		

	</div>
		<div id="toc-wrapper">
		<nav id="toc"></nav>
	</div>
</div>
</div>
</main>


<script src="assets/js/navbar_offset_scroller.js"></script>
</body>
</html>
