<!DOCTYPE html>
<html lang="en">
<head>

<base href=".">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>ビルドターゲット</title>

<link rel="stylesheet" href="assets/css/custom_bootstrap.css" type="text/css">
<link rel="stylesheet" href="assets/css/bootstrap-toc.min.css" type="text/css">
<link rel="stylesheet" href="assets/css/frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">


<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/scrollspy.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/bootstrap-toc.min.js"></script>
<script src="assets/js/jquery.touchSwipe.min.js"></script>
<script src="assets/js/anchor.min.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>

<script src="assets/js/lines_around_headings.js"></script>


<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body class="no-script
" data-spy="scroll" data-target="#toc" data-offset="70">

<script>
$('body').removeClass('no-script');
</script>

<nav class="navbar navbar-fixed-top navbar-default" id="topnav">
	<div class="container-fluid">
		<div class="navbar-right">
			<a id="toc-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<form class="navbar-form pull-right" id="navbar-search-form">
                               <div class="form-group has-feedback">
                                       <input type="text" class="form-control input-sm" name="search" id="sidenav-lookup-field" placeholder="search" disabled>
				       <span class="glyphicon glyphicon-search form-control-feedback" id="search-mgn-glass"></span>
                               </div>
                        </form>
		</div>
		<div class="navbar-header">
			<a id="sidenav-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<a id="home-link" href="index.html" class="hotdoc-navbar-brand">
				<img src="assets/images/meson_logo.png" alt="Home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
				
<li class="dropdown">
	<a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		モジュール <span class="caret"></span>
	</a>
	<ul class="dropdown-menu" id="modules-menu">
					<li>
				<a href="Gnome-module.html">GNOME</a>
			</li>
					<li>
				<a href="i18n-module.html">i18n</a>
			</li>
					<li>
				<a href="Pkgconfig-module.html">Pkgconfig</a>
			</li>
					<li>
				<a href="Python-3-module.html">Python 3</a>
			</li>
					<li>
				<a href="Qt4-module.html">Qt4</a>
			</li>
					<li>
				<a href="Qt5-module.html">Qt5</a>
			</li>
					<li>
				<a href="RPM-module.html">RPM</a>
			</li>
					<li>
				<a href="Windows-module.html">Windows</a>
			</li>
			</ul>
</li>
<li class="dropdown">
	<a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		クィックリファレンス <span class="caret"></span>
	</a>
	<ul class="dropdown-menu" id="quick-refs-menu">
					<li>
				<a href="Reference-manual.html">関数</a>
			</li>
					<li>
				<a href="Build-options.html">オプション</a>
			</li>
					<li>
				<a href="Configuration.html">設定</a>
			</li>
					<li>
				<a href="Dependencies.html">依存関係</a>
			</li>
					<li>
				<a href="Unit-tests.html">テスト</a>
			</li>
					<li>
				<a href="Syntax.html">文法</a>
			</li>
			</ul>
</li>
			</ul>
			<div class="hidden-xs hidden-sm navbar-text navbar-center">
				<p><b>Meson ビルドシステム</b></p>
			</div>
		</div>
	</div>
</nav>

<main>
<div data-extension="core" data-hotdoc-in-toplevel="True" data-hotdoc-project="Meson-documentation-1.0" data-hotdoc-ref="Build-targets.html" class="page_container" id="page-wrapper">
<script src="assets/js/utils.js"></script>

<div class="panel panel-collapse oc-collapsed" id="sidenav" data-hotdoc-role="navigation">
	<script src="assets/js/navigation.js"></script>
	<script src="assets/js/sitemap.js"></script>
</div>

<div id="body">
	<div id="main">
				    <div id="page-description" data-hotdoc-source="Build-targets.md" data-hotdoc-role="main">
        <h1 id="">ビルドターゲット</h1>
<p>Meson には 3 種類のビルドターゲットがあります。実行モジュール、スタティックライブラリ、共有ライブラリです。これは
<code>executable</code>、<code>static_library</code>、<code>shared_library</code>
の各コマンドによって生成されます。このコマンドによって生成されるオブジェクトは<strong>不変的</strong>なものです。つまり一度作り上げたものは、他のものに変更することはできません。したがって記述されたビルドターゲットの情報のすべては確実に保持され、1
つの記述箇所において特定されることになります。</p>
<p>例として、以下は共有ライブラリを作り出すものです。</p>
<pre><code class="language-meson">project('shared lib', 'c')
shared_library('mylib', 'source.c')
</code></pre>
<p>Unix ライクなオペレーティングシステムにおいて、共有ライブラリにはバージョン番号がつくことがあります。これに対して Meson
はキーワード引数を用いて対応することができます。</p>
<pre><code class="language-meson">project('shared lib', 'c')
shared_library('mylib', 'source.c', version : '1.2.3', soversion : '0')
</code></pre>
<p>ライブラリをビルドしたら、普通はそれをリンクする実行モジュールを生成します。これも以下のようにして対応できます。</p>
<pre><code class="language-meson">project('shared lib', 'c')
lib = shared_library('mylib', 'source.c')
executable('program', 'prog.c', link_with : lib)
</code></pre>
<p>Meson
はすべてをうまく処理してくれるので、ビルド結果として生成された実行モジュールは、ビルドディレクトリ内にて直接実行できるようになります。このときには、シェルスクリプトを用意したり環境変数を定義したりするようなことは必要ありません。</p>
<p>ビルドターゲットにおいては、プログラミング言語の異なるソースファイルを複数指定することもできます。</p>
<pre><code class="language-meson">project('multilang', 'c', 'cpp')
executable('multiexe', 'file.c', 'file2.cc')
</code></pre>
<h2 id="1">オブジェクトファイル</h2>
<p>Sometimes you can't build files from sources but need to utilize an existing
object file. A typical case is using an object file provided by a third
party. Object files can be specified just like sources.</p>
<pre><code class="language-meson">exe = executable('myexe', 'source.cpp', objects : 'third_party_object.o')
</code></pre>
<p>A different case is when you want to use object files built in one target
directly in another. A typical case is when you build a shared library and
it has an internal class that is not exported in the ABI. This means you
can't access it even if you link against the library. Typical workarounds
for this include building both a shared and static version of the library or
putting the source file in the test executable's source list. Both of these
approaches cause the source to be built twice, which is slow.</p>
<p>In Meson you can extract object files from targets and use them as-is on
other targets. This is the syntax for it.</p>
<pre><code class="language-meson">lib = shared_library('somelib', 'internalclass.cc', 'file.cc', ...)
eo = lib.extract_objects('internalclass.cc')
executable('classtest', 'classtest.cpp', objects : eo)
</code></pre>
<p>Here we take the internal class object and use it directly in the test. The
source file is only compiled once.</p>
<p>Note that careless use of this feature may cause strange bugs. As an example
trying to use objects of an executable or static library in a shared library
will not work because shared library objects require special compiler
flags. Getting this right is the user's responsibility. For this reason it
is strongly recommended that you only use this feature for generating unit
test executables in the manner described above.</p>

    </div>
        




		
	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
	<hr>
	<div id="footer">
		    

	</div>
</div>

<div id="toc-column">
	
		<div class="edit-button">
		

	</div>
		<div id="toc-wrapper">
		<nav id="toc"></nav>
	</div>
</div>
</div>
</main>


<script src="assets/js/navbar_offset_scroller.js"></script>
</body>
</html>
