<!DOCTYPE html>
<html lang="en">
<head>

<base href=".">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>Localisation</title>

<link rel="stylesheet" href="assets/css/custom_bootstrap.css" type="text/css">
<link rel="stylesheet" href="assets/css/bootstrap-toc.min.css" type="text/css">
<link rel="stylesheet" href="assets/css/frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">


<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/scrollspy.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/bootstrap-toc.min.js"></script>
<script src="assets/js/jquery.touchSwipe.min.js"></script>
<script src="assets/js/anchor.min.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>

<script src="assets/js/lines_around_headings.js"></script>


<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body class="no-script
" data-spy="scroll" data-target="#toc" data-offset="70">

<script>
$('body').removeClass('no-script');
</script>

<nav class="navbar navbar-fixed-top navbar-default" id="topnav">
	<div class="container-fluid">
		<div class="navbar-right">
			<a id="toc-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<form class="navbar-form pull-right" id="navbar-search-form">
                               <div class="form-group has-feedback">
                                       <input type="text" class="form-control input-sm" name="search" id="sidenav-lookup-field" placeholder="search" disabled>
				       <span class="glyphicon glyphicon-search form-control-feedback" id="search-mgn-glass"></span>
                               </div>
                        </form>
		</div>
		<div class="navbar-header">
			<a id="sidenav-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<a id="home-link" href="index.html" class="hotdoc-navbar-brand">
				<img src="assets/images/meson_logo.png" alt="Home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
				
<li class="dropdown">
	<a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		モジュール <span class="caret"></span>
	</a>
	<ul class="dropdown-menu" id="modules-menu">
					<li>
				<a href="Gnome-module.html">GNOME</a>
			</li>
					<li>
				<a href="i18n-module.html">i18n</a>
			</li>
					<li>
				<a href="Pkgconfig-module.html">Pkgconfig</a>
			</li>
					<li>
				<a href="Python-3-module.html">Python 3</a>
			</li>
					<li>
				<a href="Qt4-module.html">Qt4</a>
			</li>
					<li>
				<a href="Qt5-module.html">Qt5</a>
			</li>
					<li>
				<a href="RPM-module.html">RPM</a>
			</li>
					<li>
				<a href="Windows-module.html">Windows</a>
			</li>
			</ul>
</li>
<li class="dropdown">
	<a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		クィックリファレンス <span class="caret"></span>
	</a>
	<ul class="dropdown-menu" id="quick-refs-menu">
					<li>
				<a href="Reference-manual.html">関数</a>
			</li>
					<li>
				<a href="Build-options.html">オプション</a>
			</li>
					<li>
				<a href="Configuration.html">設定</a>
			</li>
					<li>
				<a href="Dependencies.html">依存関係</a>
			</li>
					<li>
				<a href="Unit-tests.html">テスト</a>
			</li>
					<li>
				<a href="Syntax.html">文法</a>
			</li>
			</ul>
</li>
			</ul>
			<div class="hidden-xs hidden-sm navbar-text navbar-center">
				<p><b>Meson ビルドシステム</b></p>
			</div>
		</div>
	</div>
</nav>

<main>
<div data-extension="core" data-hotdoc-in-toplevel="True" data-hotdoc-project="Meson-documentation-1.0" data-hotdoc-ref="Localisation.html" class="page_container" id="page-wrapper">
<script src="assets/js/utils.js"></script>

<div class="panel panel-collapse oc-collapsed" id="sidenav" data-hotdoc-role="navigation">
	<script src="assets/js/navigation.js"></script>
	<script src="assets/js/sitemap.js"></script>
</div>

<div id="body">
	<div id="main">
				    <div id="page-description" data-hotdoc-source="Localisation.md" data-hotdoc-role="main">
        <h1 id="localisation">Localisation</h1>
<p>Localising your application with GNU gettext takes a little effort but is
quite straightforward. We'll create a <code>po</code> subdirectory at your project root
directory for all the localisation info.</p>
<h2 id="generating-pot-and-po-files-in-your-main-mesonbuild-file-include-the">Generating .pot and .po files In your main meson.build file include the</h2>
<p><code>po</code> subdirectory in the build proces.</p>
<pre><code>subdir('po')
</code></pre>
<p>In this <code>po</code> subdirectory we need: - <code>LINGUAS</code>: Space separated list of
languages - <code>POTFILES</code>: List of source files to scan for translatable
strings.  - <code>meson.build</code>: Localization specific meson file</p>
<h3 id="linguas-file-with-space-separated-list-of-languages-a-sample-linguas">LINGUAS File with space separated list of languages. A sample LINGUAS</h3>
<p>might look like this.</p>
<pre><code>aa ab ae af
</code></pre>
<h3 id="potfiles-file-that-lists-all-the-source-files-that-gettext-should-scan">POTFILES File that lists all the source files that gettext should scan</h3>
<p>in order to find strings to translate. The syntax of the file is one line
per source file and the line must contain the relative path from source
root. A sample POTFILES might look like this.</p>
<pre><code>src/file1.c
src/file2.c
src/subdir/file3.c
include/mything/somefile.h
</code></pre>
<h3 id="mesonbuild">meson.build</h3>
<p>Localization specific meson file. It imports and uses the <code>i18n</code> module. If not defined before it needs to define the <code>GETTEXT_PACKAGE</code> global.</p>
<pre><code class="language-meson">i18n = import('i18n')
# define GETTEXT_PACKAGE
add_project_arguments('-DGETTEXT_PACKAGE="intltest"', language:'c')
i18n.gettext(meson.project_name(),
    args: '--directory=' + meson.source_root()
)
</code></pre>
<p>The first command imports the <code>i18n</code> module that provides gettext features. The fourth line does the actual invocation. The first argument is the gettext package name. This causes two things to happen. The first is that Meson will generate binary mo files and put them to their proper locations when doing an install. The second is that it creates a build rule to regenerate the main pot file. If you are using the Ninja backend, this is how you would invoke the rebuild.</p>
<h3 id="generate-pot-file">generate .pot file</h3>
<p>Then we need to generate the main pot file. The potfile can have any name
but is usually the name of the gettext package. Let's say the project is
called <em>intltest</em>. In this case the corresponding pot file would be called
<code>intltest.pot</code>.</p>
<p>Run the following command from your build folder to generate the pot
file. It is recommended to inspect it manually afterwards and fill in
e.g. proper copyright and contact information.</p>
<p><code>console $ ninja intltest-pot</code></p>
<h3 id="generate-po-files">generate .po files</h3>
<p>For each language listed in the array above we need a corresponding <code>.po</code>
file. Those can be generated by running the following command from your
build folder.</p>
<p><code>console $ ninja intltest-update-po</code></p>

    </div>
        




		
	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
	<hr>
	<div id="footer">
		    

	</div>
</div>

<div id="toc-column">
	
		<div class="edit-button">
		

	</div>
		<div id="toc-wrapper">
		<nav id="toc"></nav>
	</div>
</div>
</div>
</main>


<script src="assets/js/navbar_offset_scroller.js"></script>
</body>
</html>
